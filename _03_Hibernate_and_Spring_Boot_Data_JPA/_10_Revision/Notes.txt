JPA :
    Spring Data JPA --> JPA --> Hibernate --> JDBC --> Database
    1. Spring Data JPA : A shortcut tool that lets you work with databases without writing SQL or DAO code. (removes boilerplate)
    2. JPA : A rulebook that explains how Java objects should be connected to database tables. (defines rules)
    3. Hibernate Framework : A helper that automatically converts Java objects into database data and back. (does mapping)
    4. JDBC : A tool that lets Java directly talk to a database using SQL queries. (talks to DB)
    5. Database : Use to store data

    Hibernate Configurations (In application.properties):
        spring.jpa.hibernate.ddl-auto=update/create/validate/create-drop/none       // Use to define nature of table in DB
        spring.jpa.show-sql=true                                                    // Use to show sql queries on log
        spring.jpa.properties.hibernate.format_sql=true                             // Makes Hibernate’s SQL output neat, readable, and properly formatted.
        spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect // Tells Hibernate which database language (SQL style) it should use. (Optional)

    Connecting app to DB :
        spring.datasource.url=jdbc:mysql://localhost:3306/test?useSSL=false
        spring.datasource.username=root
        spring.datasource.password=Shikhil@4

    Entity :
        @Entity - Use to annotate that, this is a entity class and make table in DB according to this class
        @Table in detail : Used to give the database table a custom name or extra table settings.
                @Table(
                        name = "product_table",     // Sets the table name in the database. (Optional. If not provided then it will use entity class name)
                        catalog = "product_catalog",    // Specifies the database catalog (rarely used in real projects).
                        schema = "hr",     // Specifies the database schema where the table will be created.
                        uniqueConstraints = {
                                @UniqueConstraint(name = "sku_unique", columnNames = {"sku"}),  // Every "sku" must be unique
                                @UniqueConstraint(name = "title_price_unique", columnNames = {"title_x", "price"})    // can't add two or more title with same price
                        },
                        indexes = {
                                @Index(name = "sku_index", columnList = "sku")  // Creates an index on SKU to make searches faster.
                        }
                )
        @Id - Marks a field as the primary key of the table.
        @GeneratedValue(strategy = GenerationType.IDENTITY) - Tells the database to automatically generate the primary key value.
        @Column(name = "name", nullable = false, length = 50) - Used to customize a column’s properties in the database.
            name → column name in DB
            nullable = false → column cannot be null
            length = 50 → maximum size of the column
        @CreationTimestamp - Automatically stores the date and time when a record is created.
        @UpdateTimestamp - Automatically updates the date and time whenever a record is modified.

    Step to connect to DB
         Hibernate Configurations --> Connecting app to DB --> Entity

Spring Data JPA :
    1. By using Spring Data JPA, we can easily implement JPA-based repositories by providing boilerplate code, derived query methods, and utilities, so we don’t need to write common methods like findById() and findAll() manually.
    2. We can also write our own queries manually in JPQL (Java Persistence Query Language) if we want to execute a method according to our logic
    3. Repositories Provided by Spring Data JPA -
        JpaRepository --> extends --> CrudRepository --> extends --> PagingAndSortingRepository --> extends --> JpaRepository
        | Repository                 | CRUD  | Paging  |  Sorting  |    JPA Features     |
        | -------------------------- | ----- | ------- | --------- | --------------------|
        | Repository                 | ❌    | ❌      | ❌       | ❌                   |
        | CrudRepository             | ✅    | ❌      | ❌       | ❌                   |
        | PagingAndSortingRepository | ✅    | ✅      | ✅       | ❌                   |
        | JpaRepository              | ✅    | ✅      | ✅       | ✅                   |
    4. We use JpaRepository generally so that we will get all the features
    5. JpaRepository Interface is implemented by SimpleJpaRepository Class.
    6. Key Features of Spring Data JPA :
            1. Repository Abstraction : Provides a Repository interface with methods for common data access operations
            2. Custom Queries Methods : Allows defining custom query methods by simply declaring method names (like if we want to look for products between some range)
            3. Pagination and Sorting : Offers built-in support for Pagination and Sorting
            4. Query Derivation : Automatically generates queries with method names (automatic means it follows rules to generate)
                e.g. In test file, we created a method queryDerivation() that returns List of ProductEntity by method findByTitle() and passed title of sku. It wont generate if we provide titles because in our entity class there is not anything like titles.
                     Then we need to create a method with same name in ProductRepository as well
                     So now, when we run that method from test, then all the entries of same title will be returned

                Rules for creating Query Methods :
                    List<ProductEntity> findByDateCreatedBetween(LocalDateTime startDate, LocalDateTime endDate);
                            ^              ^            ^                       ^
                       Return Type    Query Subject    Query Predicate      Input Parameters

                       1. Return type - It can be like List<>, Optional<>, or ProductEntity itself
                       2. Query Subject - countBy, findBy, updateBy. Indicates the type of operation to perform
                       3. Query Predicate - inside DateCreatedBetween we have one more operator i.e. Between. Specifies the field (dateCreated) and condition (Between)
                       4. Input Parameters - Parameters that we provide. Values used by the predicate to filter data
                Spring reads your method name → converts it into SQL → binds parameters → returns mapped Java objects

                       Rules of Method Names :
                          1. The name of query method must start with one of the following prefix : findBy, readBy, queryBy, and getBy
                              Example : findByName, readByName, queryByName, getByName
                          2. If we want to limit the number of returned query results we can add First or Top keyword before first by word.
                              Example : findFirstByName, readFirst2ByName, findTop10ByName
                          3. If we want to select unique results, We have to add distinct keyword before the First by word
                              Example : findDistinctByName or findNameByDistinct
                          4. Combine property expression with AND or OR
                              Example : findByNameOrDescription, findByNameAndDescription
                          More rules on : https://docs.spring.io/spring-data/jpa/reference/repositories/query-keywords-reference.html

Sorting : If we want to sort. E.g. when we sort/filter items on amazon
    Two ways of Sort :
    1. OrderBy - Use to sort by order of the field But it is tightly coupled and we need to write multiple methods to sorts on different parameters)
    2. Sort Class - To overcome tight coupling, We should use Sort Class

Paging :
    1. A single chunk of data that contains a subset of total dataset. It is an interface representing a page of data, including information about the total number of pages, total number of elements, and the current page's data
    2. Use to show content in small format. E.g. When there is lot of data then we see next page option on amazon website
