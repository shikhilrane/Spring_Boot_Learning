Hibernate ORM Mapping :

                -------------------------                       -------------------------                       -------------------------
                |                       |   -------------->     |                       |   -------------->     |                       |
                |      Java Class       |                       |  Hibernate Framework  |                       |     Database Table    |
                |                       |   <--------------     |                       |   <--------------     |                       |
                -------------------------                       -------------------------                       -------------------------




          ---------------------------------------------------- Layers from Spring Data JPA to Database ----------------------------------------------------

                                                                -------------------------
                                                                |        Database       |
                                                                -------------------------
                                                                            ^
                                                                            |
                                                                            |   JDBC directly talks with Database using SQL
                                                                            |
                                                                            V
                                                                -------------------------
                                                                |         JDBC          |
                                                                -------------------------
                                                                            ^
                                                                            |
                                                                            |   Java Objects â†” Database Tables
                                                                            |
                                                                            V
                                                                -------------------------
                                                                |       Hibernate       |
                                                                -------------------------
                                                                            ^
                                                                            |
                                                                            |   Specification (rules only, no implementation)
                                                                            |
                                                                            V
                                                                -------------------------
                                                                |         JPA           |
                                                                -------------------------
                                                                            ^
                                                                            |
                                                                            |   Uses Hibernate internally
                                                                            |
                                                                            V
                                                                -------------------------
                                                                |    Spring Data JPA    |
                                                                -------------------------



        JDBC (talks to DB) - A tool that lets Java directly talk to a database using SQL queries.
            1. JDBC (Java Data Base Connectivity)
            2. It is use to connect our program with database
            3. It uses queries to communicate with database

        Hibernate (does mapping) - A helper that automatically converts Java objects into database data and back.
            1. It is a ORM (Object Relational Mapping) framework.
            2. It converts Java objects â†” database rows automatically
            3. We don't need to take care about how it converts the data but just know "SQL Queries generated by Hibernate gets executed using JDBC"
            4. Hibernate is the implementation built on JPA Specification
            5. Hibernate is a framework that implements the JPA specification

        JPA (defines rules) - A rulebook that explains how Java objects should be connected to database tables.
            1. JPA is a specification (rules + interfaces + annotations)
            2. It defines : @Entity @Id @OneToMany EntityManager
            3. JPA provides us the certain set of rules that you have to follow to work.
            4. Means just specifications as how to Relation and objects mapping should be done
            5. It is a Interface that has some method
            6. Rules :
                a. Entity mapping rules â€“ Define how a Java class and its fields map to database tables and columns.
                b. Primary key generation rules â€“ Define how unique identifiers are generated for entities.
                c. Relationship mapping rules â€“ Define how relationships between entities are created and managed.
                d. Object-Relational Mapping (ORM) rules â€“ Define how Java objects are converted to relational data and vice versa.
                e. JPQL query rules â€“ Define how object-based queries are written using JPQL instead of SQL.
                f. Entity lifecycle rules â€“ Define the different states of an entity and their transitions.
                g. Transaction management rules â€“ Define how database operations are committed or rolled back.
                h. Caching rules â€“ Define how first-level and optional second-level caching works.
                i. Fetching rules (Lazy / Eager) â€“ Define when related entities are loaded from the database.
                j. Exception handling rules â€“ Define a standard exception hierarchy for persistence errors.


        Spring Data JPA (removes boilerplate) - A shortcut tool that lets you work with databases without writing SQL or DAO code.
            1. This comes with spring boot
            2. It built on top of JPA and helps us building DAO methods using Repository
            3. All the DAO methods (findById(), findAll(), etc.) we used in service layer comes from this layer


    As developers, we can connect to any layer.
    If we donâ€™t use Spring Data JPA, we can directly use JPA.
    In that case, we write JPQL (Java Persistence Query Language).
    JPQL is converted into SQL by Hibernate, and that SQL is executed using JDBC.





    ---------------------------------------------------- Creation of table in DB by Hibernate ----------------------------------------------------
    Now, We have created Product Class in entities
    Common Hibernate Configurations :
        1. spring.jpa.hibernate.ddl-auto=update/create/validate/create-drop/none
            ddl = Data Definition Layer (It contains all the commands that we can use to manipulate our schema)
            update      =   Update the table automatically if the entity changes.
                            Adds new columns if you add fields in entity
                            Does NOT delete existing data
            create      =   Delete old table and create a fresh one every time the app starts.
                            Existing table is dropped
                            New table is created
                            All old data is lost
            validate    =   Just check whether entity and table match.
                            Does NOT create or change tables
                            Throws error if mismatch found
            create-drop =   Create table when app starts and delete it when app stops.
                            Table exists only while app is running
                            Mostly used in unit testing
            none        =   Hibernate does nothing with the database.

        2. spring.jpa.show-sql=true
            Shows the SQL queries that Hibernate runs, directly in the console.

        3. spring.jpa.properties.hibernate.format_sql=true
            Makes Hibernateâ€™s SQL output neat, readable, and properly formatted.

        4. spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect (Optional)
            Tells Hibernate which database language (SQL style) it should use.
            But now a days programs are smarter so spring boot knows which dialect to use
            Dialect tells Hibernate which SQL database (MySQL, PostgreSQL, Oracle, etc.) SQL to generate, but Spring Boot usually auto-detects it, so itâ€™s optional.



    ---------------------------------------------------- Entity Annotations in Product----------------------------------------------------
    @Entity - Use to annotate that, this is a entity class and make table in DB according to this class
    @Table - Used to give the database table a custom name or extra table settings.
    @Id - Marks a field as the primary key of the table.
    @GeneratedValue(strategy = GenerationType.IDENTITY) - Tells the database to automatically generate the primary key value.
    @Column(name = "name", nullable = false, length = 50) - Used to customize a columnâ€™s properties in the database.
        name â†’ column name in DB
        nullable = false â†’ column cannot be null
        length = 50 â†’ maximum size of the column
    @CreationTimestamp - Automatically stores the date and time when a record is created.
    @UpdateTimestamp - Automatically updates the date and time whenever a record is modified.

    @Table in detail :
        @Table(
                name = "product_table",     // Sets the table name in the database. (Optional. If not provided then it will use entity class name)
                catalog = "product_catalog",    // Specifies the database catalog (rarely used in real projects).
                schema = "hr",     // Specifies the database schema where the table will be created.
                uniqueConstraints = {
                        @UniqueConstraint(name = "sku_unique", columnNames = {"sku"}),  // Every "sku" must be unique
                        @UniqueConstraint(name = "title_price_unique", columnNames = {"title_x", "price"})    // can't add two or more title with same price
                },
                indexes = {
                        @Index(name = "sku_index", columnList = "sku")  // Creates an index on SKU to make searches faster.
                }
        )

            schema =
                Database
                      â”œâ”€â”€ hr (schema)
                      â”‚    â”œâ”€â”€ product_table
                      â”‚    â”œâ”€â”€ employee_table
                      â”‚
                      â”œâ”€â”€ sales (schema)
                      â”‚    â”œâ”€â”€ orders_table
                      â”‚    â”œâ”€â”€ customers_table

            indexes =
                Think of an index like a book index
                      ðŸ“– Book without index â†’ You read page by page (slow)
                      ðŸ“– Book with index â†’ Jump directly to the page (fast)
                In database terms
                    Without index : SELECT * FROM product_table WHERE sku = 'A123';
                    ðŸ‘‰ Database checks every row ðŸ˜´

                    With index:
                    ðŸ‘‰ Database jumps directly to matching rows ðŸš€

                    In your code
                    @Index(name = "sku_index", columnList = "sku")
                    ðŸ‘‰ Means:
                    Create a shortcut on sku column to make search faster




    ---------------------------------------------------- Connecting to MySQL ----------------------------------------------------
    These tell Spring Boot where the database is and how to connect to it. Without them, Spring Boot has no idea which database to use.
        spring.datasource.url=jdbc:mysql://localhost:3306/test?useSSL=false
        spring.datasource.username=root
        spring.datasource.password=Shikhil@4
            where,
                jdbc:mysql://localhost:3306/test = Database address
                                                   Meaning:
                                                       jdbc â†’ use JDBC to connect
                                                       mysql â†’ database type
                                                       localhost â†’ database is on your machine
                                                       3306 â†’ MySQL port
                                                       test â†’ database name
                                                   So this means : â€œConnect to the test MySQL database running on my computer.â€
                                                   useSSL=false â†’ disables SSL warnings in local development.

                spring.datasource.username = Who is connecting to the database,
                                            Database user name
                                            Like a login ID
                spring.datasource.password = Password for the database user